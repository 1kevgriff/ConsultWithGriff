---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

const posts = await getCollection('blog');
console.log(`Found ${posts.length} blog posts`);
posts.forEach((post) => {
  console.log(`- ${post.data.title} (${post.data.date.toLocaleDateString()})`);
});
---

<BaseLayout title="Test Collections" description="Testing Astro Content Collections">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold mb-4">Content Collections Test</h1>
    <p class="mb-6">Found {posts.length} blog posts</p>
    <ul class="space-y-4">
      {
        posts.map((post) => (
          <li class="border-l-4 border-green-600 pl-4">
            <>
              <strong class="text-xl">{post.data.title}</strong>
              <br />
            </>
            <>
              <span class="text-copy-secondary">Date: {post.data.date.toLocaleDateString()}</span>
              <br />
            </>
            <>
              <span class="text-sm">Tags: {post.data.tags.join(', ')}</span>
              <br />
            </>
            <span class="text-sm">Categories: {post.data.categories.join(', ')}</span>
          </li>
        ))
      }
    </ul>
  </div>
</BaseLayout>
