---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import Card from '../components/Card.astro';
import Button from '../components/Button.astro';

// Get the latest blog post
const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
const latestPost = sortedPosts[0];
---

<BaseLayout
  title="Kevin W. Griffin - Azure & .NET Architect"
  description="Independent software consultant specializing in ASP.NET Core, Microsoft Azure, and modern web development. 16-time Microsoft MVP."
>
  <!-- Hero Section -->
  <Hero
    title=".NET Architecture. Azure Infrastructure. One Expert Who Sees the Whole Picture."
    subtitle="I help startups and scaling companies fix what's slowing them down â€” modernizing legacy systems, optimizing Azure costs, and building architecture that won't break at 2 AM."
    imageSrc="/kevin_rockon.jpg"
    imageAlt="Kevin W. Griffin"
    audienceFilter="For founders, tech leads, and teams dealing with scaling pain, legacy migration, or Azure complexity."
    primaryCTA={{
      text: 'Schedule a free discovery call',
      href: 'https://app.onecal.io/b/kevin-griffin/chat',
    }}
    secondaryCTA={{ text: 'View Courses', href: '/courses' }}
    microcopy="No pitch. No pressure. You'll leave with clarity on what's possible â€” whether or not we work together."
  />

  <!-- Latest Article Highlight -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4 lg:px-8">
      <Card variant="white" class="max-w-4xl mx-auto">
        <div class="flex items-start gap-4">
          <div class="flex-shrink-0">
            <div class="w-2 h-full bg-gold rounded-full"></div>
          </div>
          <div class="flex-1">
            <h2 class="text-2xl font-bold text-navy mb-4">Latest Article</h2>
            <h3 class="text-xl font-semibold mb-3">
              <a
                href={`/${latestPost.data.permalink}`}
                class="text-navy hover:text-gold transition-colors"
              >
                {latestPost.data.title}
              </a>
            </h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              {latestPost.data.excerpt || latestPost.data.summary}
            </p>
            <Button href={`/${latestPost.data.permalink}`} variant="primary" size="sm">
              Read More
            </Button>
          </div>
        </div>
      </Card>
    </div>
  </section>

  <!-- About Section -->
  <section class="py-20 bg-white">
    <div class="container mx-auto px-4 lg:px-8">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl lg:text-4xl font-bold text-navy mb-8 text-center">
          Hi, I'm Kevin Griffin
        </h2>

        <div class="space-y-6 text-lg text-gray-700 leading-relaxed">
          <p>
            Most .NET consultants can write code. I do something different â€” I make sure your team
            can maintain what we build together.
          </p>

          <p>
            After 19 years and{' '}
            <strong class="text-navy">16 consecutive years as a Microsoft MVP</strong>, I've learned
            that the best architecture is the one your team actually understands. I don't parachute
            in with complex solutions and disappear. I design systems with{' '}
            <strong class="text-navy">ASP.NET Core</strong> and{' '}
            <strong class="text-navy">Microsoft Azure</strong> that scale AND transfer knowledge so
            you're never dependent on me.
          </p>

          <p>
            Based in Virginia, I'm a husband and father of three amazing boys. I work with startups
            and mid-size companies across the US through remote consulting and occasional on-site
            workshops.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="py-20 bg-navy-light">
    <div class="container mx-auto px-4 lg:px-8">
      <h2 class="text-3xl lg:text-4xl font-bold text-white mb-12 text-center">How I Can Help</h2>

      <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
        <Card variant="navy" class="text-center">
          <div class="text-gold text-5xl mb-4">ðŸ’¼</div>
          <h3 class="text-xl font-bold mb-3">Consulting</h3>
          <p class="text-gray-200 mb-4">
            Your architecture problem, solved â€” with documentation and knowledge transfer so your
            team owns the solution.
          </p>
          <a href="/consulting" class="text-gold hover:text-gold-warm font-semibold">
            Learn More â†’
          </a>
        </Card>

        <Card variant="navy" class="text-center">
          <div class="text-gold text-5xl mb-4">ðŸŽ“</div>
          <h3 class="text-xl font-bold mb-3">Courses</h3>
          <p class="text-gray-200 mb-4">
            Practical .NET courses that skip the theory overload. Learn SignalR, background
            processing, and Azure monitoring by building real features.
          </p>
          <a href="/courses" class="text-gold hover:text-gold-warm font-semibold">
            View Courses â†’
          </a>
        </Card>

        <Card variant="navy" class="text-center">
          <div class="text-gold text-5xl mb-4">ðŸŽ¤</div>
          <h3 class="text-xl font-bold mb-3">Speaking</h3>
          <p class="text-gray-200 mb-4">
            Engaging technical talks that leave your audience with actionable takeaways â€” not just
            slides to forget.
          </p>
          <a href="/contact" class="text-gold hover:text-gold-warm font-semibold"> Book Me â†’ </a>
        </Card>
      </div>
    </div>
  </section>

  <!-- Discovery Call CTA Section -->
  <section class="py-20 bg-gold">
    <div class="container mx-auto px-4 lg:px-8">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl lg:text-4xl font-bold text-navy mb-6">
          Stuck Between "Rewrite Everything" and "Keep Patching"?
        </h2>
        <p class="text-xl text-navy mb-4 leading-relaxed">
          Most architecture decisions aren't black and white. In 30 minutes, we'll map your
          constraints â€” budget, timeline, team skills, existing systems â€” and identify paths forward
          that actually fit your reality.
        </p>
        <p class="text-lg text-navy mb-8 opacity-90">
          You'll leave with clarity on the tradeoffs and a direction â€” whether or not we work
          together.
        </p>
        <Button
          href="https://app.onecal.io/b/kevin-griffin/chat"
          variant="primary"
          size="lg"
          class="bg-navy text-white border-2 border-navy hover:bg-navy-light"
        >
          Schedule a free discovery call
        </Button>
      </div>
    </div>
  </section>
</BaseLayout>
